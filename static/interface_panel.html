<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</title>
    <style>
        body {
            font-family: sans-serif;
            background-color: #f7f7f7;
            margin: 0;
            padding: 2em;
            display: flex;
            justify-content: center;
        }
        .card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 2em;
            max-width: 400px;
            width: 100%;
        }
        h2 {
            text-align: center;
        }
        .row {
            display: flex;
            justify-content: space-between;
            margin: 0.5em 0;
        }
        .row b {
            width: 45%;
        }
    </style>
</head>
<body>
    <div class="card">
        <h2>üì° –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</h2>
        <div class="row"><b>üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:</b> <span id="temperature">‚Äì</span> ¬∞C</div>
        <div class="row"><b>üíß –í–ª–∞–∂–Ω–æ—Å—Ç—å:</b> <span id="humidity">‚Äì</span> %</div>
        <div class="row"><b>üö™ –î–≤–∏–∂–µ–Ω–∏–µ:</b> <span id="motion">‚Äì</span></div>
        <div class="row"><b>üåä –í–æ–¥–∞:</b> <span id="water">‚Äì</span></div>
        <div class="row"><b>üì∂ RSSI:</b> <span id="rssi">‚Äì</span></div>
        <div class="row"><b><span style="opacity:0">---</span> SNR:</b> <span id="snr">‚Äì</span></div>
        <div class="row"><b>‚è±Ô∏è –í—Ä–µ–º—è:</b> <span id="time">‚Äì</span></div>
    </div>

    <script>
        async function updateData() {
            try {
                const response = await fetch('/api/data');
                const data = await response.json();

                document.getElementById('temperature').textContent = data.temperature ?? '‚Äì';
                document.getElementById('humidity').textContent = data.humidity ?? '‚Äì';
                document.getElementById('motion').textContent = data.motion ? '–î–∞' : '–ù–µ—Ç';
                document.getElementById('water').textContent = data.water ?? '‚Äì';
                document.getElementById('rssi').textContent = data.rssi ?? '‚Äì';
                document.getElementById('snr').textContent = data.snr ?? '‚Äì';

                const now = new Date();
                document.getElementById('time').textContent = now.toLocaleTimeString();
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö:", error);
            }
        }

        setInterval(updateData, 5000);
        updateData();
    </script>
</body>
</html>
